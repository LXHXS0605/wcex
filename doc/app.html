<template>
  <link rel="stylesheet" href="." />
  <!-- <link rel="stylesheet" href="@/@wcex/ui/css/scrollbar.css" /> -->

  <meta
    name="scope"
    shadow.int="1"
    drawer.bool="true"
    cur-page.object="{}"
    home="wcex-doc.doc?url=01-开始上手/01-简介.md"
  />
  <style>
    :host {
      display: flex;
      flex-direction: column;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }
    .main {
      display: flex;
      flex: 1;
      overflow: hidden;
    }
    .left {
      background-color: "$$color.bg.l2";
    }
    .content {
      display: flex;
      flex-direction: column;
      flex: 1;
      overflow-x: hidden;
    }
    .doc {
      flex: 1;
    }
  </style>
  <wcex-ui.ui !sync ></wcex-ui.ui>

  <!-- <test-main aa="111"></test-main> -->
  <title- $$drawer="$root.drawer" style="z-index: 999"></title->

  <!-- 主窗口 -->
  <div class="main">
    <!-- 菜单 -->
    <div class="left shadow scroll">
      <nav- $min="!drawer" $$="curPage"></nav->
    </div>
    <div class="content">
      <wcex-ui.route home="$root.home" @error.stop="$log.error('error router');$router.go($root.home)"></wcex-ui.route>
      <footer-></footer->
    </div>
  </div>

  <script scope=".">
    // location.search
    // location.hash="#/sss"
    return class {
      // 动态设置字体
      onCreate() {
        this.loadFont();
      }
      loadFont() {
        var font = {
          cn: { css: "@/cn-fontsource-yozai-light-regular/font.css", family: "Yozai Light" },
          en: { css: "@/@fontsource/concert-one/index.css", family: "Concert One" },
        };

        if (localStorage.__FONT) {
          try {
            font = JSON.parse(localStorage.__FONT);
          } catch (e) {
            this.$log("invalid font config:", e.message);
          }
        }

        var family = "Roboto, Arial, Helvetica, sans-serif";
        Object.values(font).forEach((v) => {
          var link = document.createElement("link");
          link.rel = "stylesheet";
          link.href = this.$path(v.css);
          document.head.appendChild(link);
          family = v.family + ", " + family;
        });
        document.body.parentElement.style.fontFamily = family;
      }
    };
  </script>
</template>
