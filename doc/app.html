<template>
  <link rel="stylesheet" href="." global="import" />

  <meta name="scope" shadow.int="1" drawer.bool="true" />
  <style>
    :host {
      display: flex;
      flex-direction: column;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }
    .main {
      display: flex;
      flex: 1;
    }
    .left {
      overflow-x: hidden;
      overflow-y: auto;
      background-color: "$$color.pria.l3_";
    }
    .content {
      position: relative;
      flex: 1;
      overflow-x: hidden;
      overflow-y: auto;
    }
  </style>
  <title- $$drawer="$root.drawer"></title->

  <!-- 主窗口 -->
  <div class="main">
    <!-- 菜单 -->
    <div class="left shadow">
      <nav- $min="!drawer"></nav->
    </div>
    <div class="content">
      <main-  class="main"></main->

      <footer-></footer->
    </div>
  </div>

  <script scope=".">

    return class {
      // 动态设置字体
      onCreate() {
        this.loadFont();
      }
      loadFont() {
        // cn: { css: "@/@wc1font/honglei-sim/font.css", family: "honglei sim" },
        // https://cdn.jsdelivr.net/npm/@wc1font/lxgw-wen-kai-screen/font.css
        var font = {
          cn: { css: "@/@wc1font/lxgw-wen-kai-screen/font.css", family: "LXGW WenKai Screen" },
          en: { css: "@/@fontsource/concert-one/index.min.css", family: "Concert One" },
        };

        if (localStorage.__FONT) {
          try {
            font = JSON.parse(localStorage.__FONT);
          } catch (e) {
            this.$log("invalid font config:", e.message);
          }
        }

        var family = "Roboto, Arial, Helvetica, sans-serif";
        Object.values(font).forEach((v) => {
          var link = document.createElement("link");
          link.rel = "stylesheet";
          link.href = this.$path(v.css);
          document.head.appendChild(link);
          family = v.family + ", " + family;
        });
        document.body.parentElement.style.fontFamily = family;
      }
    };
  </script>
</template>
