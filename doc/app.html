<template>
  <link rel="stylesheet" href="@/@fontsource/akaya-kanadaka/index.min.css" global="link" />
  <link rel="stylesheet" href="@/@wc1font/honglei-sim/font.css" global="link" />
  <link rel="stylesheet" href="." global="import" />

  <meta name="scope" shadow.int="1" drawer.bool="true">
  <style>
    :host {
      display: flex;
      flex-direction: column;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }
    .main{
      display: flex;
      flex: 1;
    }
    .left{
      width: ':${drawer?12:4}em';
      overflow-x: hidden;
      overflow-y: auto;
      background-color: '$$color.pria.l3_';
    }
    .content{
      position: relative;
      flex: 1;
      overflow-x: hidden;
      overflow-y: auto;
    }
  </style>

<!-- 标题栏 -->
  <wcex-ui.title $$drawer="$rootScope.drawer" class="shadow trans"  style="--shadow:var(--shadow-8);z-index: 999;" $color="$color.pri.l2">
    WCEX
    <div slot="subtitle">原生响应式 Web Components 扩展库</div>
    <img src="./assets/logo.png" style="width: 2.5em;" alt="" slot="logo">

    <!-- 工具区 -->
    <div class="column" slot="tools" style="width: 6em;" :>
      <div class="column" style="justify-content: center;">
      <!-- 调色板 -->
      <com-color_picker> </com-color_picker>
      <div :>${loadtime}ms</div>

      </div>
    </div>
    <!-- 导航区域 -->
    <div slot="nav">对策但是看见</div>
  </wcex-ui.title>
  <!-- 主窗口 -->
  <div class="main">
    <!-- 菜单 -->
    <div class="left shadow trans">
      <nav-></nav->
    </div>
    <div class="content">
      <h1 $>drawer</h1>

      <!-- 顶部标题 -->
      <h1>Hello 中文</h1>
      <h2>Hello 中文</h2>
      <h3>Hello 中文</h3>
      <h4>Hello 中文</h4>
    
      <h5>Hello 中文</h5>
      <h6>Hello 中文</h6>
      <div  :class="trans" @click="shadow=shadow==1?4:1" :style="transform:translate(1px, ${-shadow/2}px);" >
        <span>OKOK</span>
        <h3>OK</h3>
        ok
        <div>Hello 中文</div>
        <div1>Hello 中文</div1>
    
      </div>
    
  
    </div>
  </div>

  
  <script scope=".">
    return class {
      loadtime=0;
      // 动态设置字体
      onCreate() {
        window.addEventListener('wcex-loaded',(ev)=>{
          this.loadtime=ev.detail.time;
        })
        this.loadFont()
      }
      loadFont() {
        var font = {
          cn: { css: "@/@wc1font/honglei-sim/font.css", family: "honglei sim" },
          en: { css: "@/@fontsource/akaya-kanadaka/index.min.css", family: "Akaya Kanadaka" },
        };
        if (localStorage.__FONT) {
          try {
            font = JSON.parse(localStorage.__FONT);
          } catch (e) {
            this.$log("invalid font config:", e.message);
          }
        }

        var family = "Arial, Helvetica, sans-serif";
        Object.values(font).forEach((v) => {
          var link = document.createElement("link");
          link.rel = "stylesheet";
          link.href = this.$path(v.css);
          document.head.appendChild(link);
          family = v.family + ", " + family;
        });
        document.body.parentElement.style.fontFamily = family;
      }
    };
  </script>
</template>
