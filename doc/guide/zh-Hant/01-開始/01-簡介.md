<!--DESC: {"icon":"explore"} -->
<p align="center"><svg width=8em src="/logo.svg" ></svg></p>

# 歡迎來到 Web Components 的世界

WCEX 是一個快速實現 **Web Components** 的 **擴展庫** ，能快速和高效的進行開發 WEB 前端頁面

- **現代的框架特性**：WCEX 也實現了目前許多現代Web前端框架的特性，如數據綁定，依賴更新、路由、開發熱載入...。
- **獨特功能**：，WCEX 還具備許多獨特的功能，如 Style 動態綁定， 無打包、自動化配色等
- **TypeScript**： WCEX 全面支援 Typescript， 自身也完全使用 TypeScript 開發
- **直觀語義**：WCEX 完整實現了包括 “if”，“for”，“$數據綁定”，“事件綁定”等現代語法， 借鑒了*VUE*， 並進行了簡化和優化，可以快速上手
- **真實 Dom**： 快速且直觀
- **WCEX** 這個單詞讀起來有點費勁，我們簡化一下，就讀做 **（/wɛks/）** 吧。
- ... 參考後續章節來繼續瞭解

## 簡單

WCEX 的設計理念就是 “**簡單** ”、“ **簡潔** ”、“ **簡化** ”，簡化產品開發各個環節，包括開發、調試、測試、發佈等，以及後續的版本升級反覆運算。
為消費者提供高效的直觀體驗，這個理念也能在 WCEX 的各個功能點和使用方式中得到體現。

> 因此，**WCEX** 做了大量工作以簡化開發和部署，不再使用繁瑣的打包、發佈、分離切割這些，而是通過運行時處理*自動依賴*和*懶載入*等方式自動化整個環節，使得專案的開發和部署就像原來的 HTML 頁面連結一樣簡單。 同時*用時載入*的技術被廣泛應用到 WCEX 應用的各個方面，包括*元件*， _Javascript_， _第三方庫_， _CSS_， _圖示_， _SVG_ 等，並通過*內部緩存*和*預處理*大大提高了應用的啟動和運行速度。

### 完全元件化

得益於WCEX完整實現原生 Web Components，我們系統中的每個頁面、範本以及各個元件均為標準化的 WebComponent，不僅如此，在實現中我們也拓展了原生 WebComponent，實現了許多新特性，可以極大的説明 WebComponent 的實現。 以下是幾個有趣的功能：

#### 動態標籤解析和載入

在使用自定義標籤時只需使用標籤，無需提前下載依賴和引入JS，WCEX會自動識別標籤並自動按需載入相關文件，這個特性允許我們實現“用時載入”，頁面中未使用標籤將不會讀取和載入而影響頁面啟動速度。 下面是一個簡單的例子，也是本文檔顯示專案中一個功能元件，你可以很容易找到， 參考代碼如下：
- _/doc/doc.html_
- 實現 markdown文檔預覽
```html
<template url="">
  <style>
    :host {
      display: flex;
      flex-direction: column;
    }
    .title{
      padding: 0.5em;
      background-color: "$$color.bgr.a9_";
    }
  </style>
  <div class="title" $>url</div>
  <wcex-ui.marked 
    style="padding: 1em;" 
    $src="($root.url)?$path('guide/cn/'+$root.url):''"
    >
  </wcex-ui.marked>
</template>
```

> 可以看到，_\<wcex-ui.marked\>_ 就是我們所引用的一個UI庫元件，在使用元件時，wcex 將自動到npm倉庫區獲取元件以及其相關依賴，按需載入。 在使用此元件時無需安裝包，也無需安裝markdown所依賴的第三方庫（這裡使用了 marked 和 highlight ），這些相關聯的庫均按需從npm中自動載入運行。 當然，也能通過很簡單的方法來讓WCEX從本地相關目錄中載入依賴包。 至於其中的其他語法，後面章節都會陸續講到，很簡潔不是嗎，這樣就實現了一個標籤名為 _\<doc-\>_ 的自定義標籤的WebComponent，直接在頁面即可引用， 也可以通過我們的路由元件直接引用，觀察瀏覽器的URL欄你就能看到。 </doc-\></wcex-ui.marked\>

#### 擴展的 WebComponent 屬性
在上述例子里，你可以發現這個元件的根標籤是 _\<template url="" \="">_， WCEX 中，所有的Web元件都被封裝在 _\<template\>_ 中，同時還提供了一個名稱為 _url_ 的外部屬性， 這個屬性可以在使用時用作傳遞外部參數，就像一個普通HTML元素標籤的屬性一樣。 在元件內部，也可以很方便的直接引用此參數。 </template\></template>


#### 增強數據綁定和依賴變更以及局部數據
在元件內部，可以通過許多方式定義和使用數據，數據能被靈活的定義和設置在一個元件的各個部分：屬性區，本地作用域，元素，內嵌腳本、外部腳本、外部JSON、第三方庫等，以便根據業務邏輯在最適合的地方定義和使用
> 數據被用來控制和操作介面，所以數據應出現在離業務邏輯元素最近的地方，這樣可以很直觀的找到你需要的物件，並方便的進行引用和修改，不必再打開另外一個文件尋找數據和定義，也非常有利於我們進行元件重構。 元件重構在日常業務開發過程中是一件很常見的事，在不斷的反覆運算發過程中，不可避免的隨著功能的增多而需要拆分出子元件，這個時候使用局部數據就可以很便捷地通過一次拷貝粘貼創建出新的元件。

### 動態引用
我們希望所有的引用庫，CSS、元件等數據都能夠是動態的，可以直接從靜態的CDN中進行引用。 這樣就可以避免安裝包，升級版本等一些複雜的過程。 這樣的好處是WCEX的元件和專案可以輕易地放到任何一個地方，如npm，github或者說任何一個靜態的網路伺服器中。 如同你現在所看到的一樣，這個文檔框架完全是使用WCEX開發，我只需將它提交到Github中，無需額外的打包發佈等流程。 即可即時看到效果。 任何一個元件包，只需提交到npm，其他專案中均可直接引用。 甚至你所需要的第三方庫，都直接引用npm源，無需單獨安裝。

> 我們都知道。 JavaScript 和WEB前端的世界是複雜的，為此我們做了大量的相容工作。 現在WCEX已經可以直接在專案中直接引用CommonJs、Amd、Umd、Es6模組、css、元件HTML、svg、字體和圖示庫而無需本地化安裝。 甚至當使用 Typescript 時，WCEX也能夠正確地處理和識別TS import，並轉換為動態依賴。 這些依賴是 _懶載入_ 的。 並且能夠正確處理關聯的多級依賴。 這樣一來，我們就能夠很方便地通過CDN直接靜態化運行提交到npm上的專案，而無需做更多的工作。 同時版本化的支援，也使得升級變得易如反掌。

### 用時載入和依賴運行
WCEX的動態特性體現在許多方面，不但是在載入時，也包括在運行時。 最小化的DOM合併更改，使得運行回應速度極快，和動態載入特性一起，在運行時，僅載入最小化的必要內容，包括JS、CSS、圖示字體等其他元件。 當然我們也可以手動配置某些元件或者腳本進行提前預載入。

## 動態載入的靜態化元件
在以上的描述中您可能發現了WCEX的一些特性，本質上，WCEX實現了元件的動態載入，以及元件的靜態化部署。 這樣一來我們的元件，就能像最早期的HTML頁面一樣，可以簡單的開發和使用。 並且能夠非常輕鬆進行靜態化管理，可以很輕鬆使用和部署到各個場景，如CDN，NPM、本機甚至是移動化設備上。

## 直觀
完整的基於 Web Components 的實現，以及數據綁定，依賴更新等現代框架的特性組合，以及基於完整真實 DOM 的實現，為開發和調試以及整個項目的邏輯提供了極大的便捷。 真實DOM和編輯的代碼一一對應，在調試控制台中可直接找到代碼中相關元素，甚至可直接對其進行操作，以便進行測試和調試。 這個功能遠比。 其他框架需要安裝的瀏覽器外掛程式要強大許多。 通過調試控制台，可以直接更改數據發送事件，觀察屬性的變化以及深入到元件內部。 甚至進行斷點和跟蹤。 這一切都是直觀的。

## 速度
WCEX運行非常快速，我們做了許多的工作來加速運行，除了最小化的動態依賴載入之外，我們還實現了範本的預處理和緩存、CSS的注入以及緩存、字體圖示等各方面的預處理。
> 值得一提的是，WCEX不像其他使用VDOM的框架一樣， 它完全基於真實DOM樹進行合併變更和處理，我們拋棄了DOM樹的差異比對演算法，取而代之的是實現了一個小巧的變更收集器，來實現當數據變更時，獲取到最小的變化單元，並將其合併，最終一次性刷新到DOM，這樣一來，對系統的回應速度大大提升。

## 漸進化開發
與其他框架有所差別的是，WCEX沒有強烈的語言偏好，不管是HTML、Javscript、Typescript等，都是我們所支援和推薦的開發選擇，只是隨著專案演進而由簡到繁再拆分重構的這樣一個漸進式開發的過程。 在這個過程中，遵循 **好貓** 理念，快速實現，精簡邏輯以及便捷的反覆運算升級。

> 我們在專案中通常採用這種方式：
> - 第一、邏輯簡單的頁面，通常採取純 _HTML_ 的方式，盡量避免使用Javascript，因為這將導致變數名的定義和引用分離，看起來累;
> - 第二、隨著業務複雜性增加，尤其是元素內嵌JS語句較長時，將JS遷移到 _HTML內聯 script 標籤_ 中，使用Javascript語法，這樣可以有基本的語法檢查和較好的格式化;
> - 第三、隨著業務進一步增加，代碼行數增多，我們一般控制 _內聯JavaScript_ 在50行以內，將Js拆分出獨立的 Typescript檔，並補全類型。 在 _WCEX_ 的支援下，這項工作會很容易;
> - 最後、元件進一步龐大，這個時候就要進行元件獨立拆分



## 低成本交付
一個軟體產品的生命週期是比較複雜的，WCEX考慮的是，如何能夠在整個軟體產品的生命週期中做到整體的簡化和優化，這個包括從開發調試鏈條。 測試部署發佈，以及後續的一次次的變更。 版本反覆運算等眾多的環節。 優化和簡化這些環節。 可以大大的提升我們開發的效率。 從而降低整個軟體開發週期的成本。 因此，我們設計的許多特性都是和這些相關。 在後續的章節裡邊。 你可能你將會看到在各個環節中的一些有趣的應用。
> 比如說，基於動態依賴和載入的特性，可以做到在團隊開發中多元件模組，多人協作的網路協同熱更新，並且這些更新是基於局部的刷新。 每個人的更改都能即時反映到你的即時預覽中

> 通過WCEX靜態化元件的特性，甚至可以直接將npm和GitHub作為你的個人博客，這樣不需要伺服器也不需要流量費，多好。

> 本文檔就是這麼做的，文檔的框架和各個元件使用了WCEX編寫，其中引用了一些NPM上現成的第三方軟體包，同時是有的內容都是使用markdown來寫作的。 最終直接發佈到了NPM，通過公共免費的CDN，就是現在能看到的這樣。

## 其他
在右上角有個小按鈕，可以體驗到WCEX _語義化即時配色_ 的特性，選擇您喜歡的顏色吧。

另外，您可以看到本文檔使用了特別的中文字體，WCEX也實現了中文大字體的用時載入。 使得在瀏覽器中使用多種中文字體的可用性大為提升，可在調試控制台中看到字庫載入的細節，而這個中文字體的使用不依賴於其他第三方的API服務也是完全靜態化的，支援離線，後邊會有章節專門講到對中文字體載載的支持和優化 參考專案：[https://github.com/wc-ex/cn-fontsource]（ https://github.com/wc-ex/cn-fontsource)
